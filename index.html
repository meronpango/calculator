<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon GO Luck Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
            background-color: #121212;
            color: white;
        }
        input {
            margin: 5px;
            padding: 8px;
            width: 100px;
            background-color: #222;
            color: white;
            border: 1px solid white;
        }
        button {
            padding: 8px 15px;
            margin: 10px;
            background-color: #444;
            color: white;
            border: 1px solid white;
        }
        table {
            margin: 20px auto;
            border-collapse: collapse;
            width: 50%;
        }
        th, td {
            border: 1px solid white;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #333;
        }
        .SS { color: gold; font-weight: bold; }
        .S { color: orange; font-weight: bold; }
        .A { color: green; font-weight: bold; }
        .B { color: blue; font-weight: bold; }
        .C { color: purple; font-weight: bold; }
        .D { color: brown; font-weight: bold; }
        .F { color: red; font-weight: bold; }
        img {
            display: block;
            margin: 20px auto;
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <h2>Pokemon GO Luck Calculator</h2>
    <div>
        <img src="duck.jpg" alt="Duck">
    </div>
    
    <label>จำนวนการเรดทั้งหมด:</label>
    <input type="number" id="raids" placeholder="ใส่จำนวนการเรดทั้งหมด">
    <br>
    <label>จำนวน IV 100 ที่ได้:</label>
    <input type="number" id="iv100" placeholder="ใส่จำนวน IV 100">
    <br>
    <label>จำนวนโปเกมอน Shiny ที่ได้:</label>
    <input type="number" id="shiny" placeholder="ใส่จำนวน Shiny">
    <br>
    <button onclick="calculateLuck()">คำนวณ</button>
    <h3>ผลลัพธ์:</h3>
    <p>จำนวน IV 100 ที่ควรจะได้: <span id="expectedIv100">0</span></p>
    <p>จำนวน Shiny ที่ควรจะได้: <span id="expectedShiny">0</span></p>
    <p>ระดับโชค IV 100: <span id="luckIv100">-</span> (<span id="gradeIv100" class="">-</span>)</p>
    <p>ระดับโชค Shiny: <span id="luckShiny">-</span> (<span id="gradeShiny" class="">-</span>)</p>
    
    <h3>ตารางเปรียบเทียบระดับโชค</h3>
    <table>
        <tr><th>เกรด</th><th>ระดับโชค</th></tr>
        <tr><td class="SS">SS</td><td>ดวงเฮงสุดๆ</td></tr>
        <tr><td class="S">S</td><td>ดวงดีมาก</td></tr>
        <tr><td class="A">A</td><td>ดวงดี</td></tr>
        <tr><td class="B">B</td><td>ดวงกลางๆ</td></tr>
        <tr><td class="C">C</td><td>ดวงแย่เล็กน้อย</td></tr>
        <tr><td class="D">D</td><td>ดวงห่วย</td></tr>
        <tr><td class="F">F</td><td>ดวงกากมากๆ</td></tr>
    </table>
    
    <script>
        function calculateLuck() {
            let raids = parseInt(document.getElementById("raids").value);
            let iv100 = parseInt(document.getElementById("iv100").value);
            let shiny = parseInt(document.getElementById("shiny").value);
            
            let iv100Rate = 1/216; // ความน่าจะเป็นของ IV 100
            let shinyRate = 1/20; // ความน่าจะเป็นของ Shiny
            
            let expectedIv100 = raids * iv100Rate;
            let expectedShiny = raids * shinyRate;
            
            let stdIv100 = Math.sqrt(raids * iv100Rate * (1 - iv100Rate));
            let stdShiny = Math.sqrt(raids * shinyRate * (1 - shinyRate));
            
            let zIv100 = (iv100 - expectedIv100) / (stdIv100 || 1);
            let zShiny = (shiny - expectedShiny) / (stdShiny || 1);
            
            let luckTier = (z) => {
                if (z >= 3) return { grade: "SS", text: "ดวงเฮงสุดๆ" };
                if (z >= 2) return { grade: "S", text: "ดวงดีมาก" };
                if (z >= 1) return { grade: "A", text: "ดวงดี" };
                if (z >= -1) return { grade: "B", text: "ดวงกลางๆ" };
                if (z >= -2) return { grade: "C", text: "ดวงแย่เล็กน้อย" };
                if (z >= -3) return { grade: "D", text: "ดวงห่วย" };
                return { grade: "F", text: "ดวงกากมากๆ" };
            };
            
            let iv100Luck = luckTier(zIv100);
            let shinyLuck = luckTier(zShiny);
            
            document.getElementById("expectedIv100").innerText = expectedIv100.toFixed(2);
            document.getElementById("expectedShiny").innerText = expectedShiny.toFixed(2);
            document.getElementById("luckIv100").innerText = iv100Luck.text;
            document.getElementById("luckShiny").innerText = shinyLuck.text;
            
            let gradeIv100 = document.getElementById("gradeIv100");
            let gradeShiny = document.getElementById("gradeShiny");
            
            gradeIv100.innerText = iv100Luck.grade;
            gradeIv100.className = iv100Luck.grade;
            
            gradeShiny.innerText = shinyLuck.grade;
            gradeShiny.className = shinyLuck.grade;
        }
    </script>
</body>
</html>
